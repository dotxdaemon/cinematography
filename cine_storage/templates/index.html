<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PURE CINEMA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 2em;
        background: #000;
        color: #ddd;
      }
      header {
        text-align: center;
        margin-bottom: 2em;
      }
      form.search {
        margin-top: 1em;
        margin-bottom: 1em;
      }
      form.search input[type="text"] {
        width: 70%;
        padding: 0.5em;
        border: 1px solid #555;
        border-radius: 4px;
        background: #222;
        color: #eee;
      }
      .gallery {
        list-style: none;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 2em;
      }
      .gallery li {
        background: #111;
        padding: 1em;
        border-radius: 8px;
      }
      .gallery img {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 4px;
      }
      a { color: #FFB347; }
      @media (max-width: 600px) {
        body { padding: 1em; }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>PURE CINEMA</h1>
      <p>
        {% if current_user.is_authenticated %}
          Logged in as {{ current_user.name }} |
          <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a href="{{ url_for('oauth_login', provider='github') }}">Login with GitHub</a> |
          <a href="{{ url_for('oauth_login', provider='google') }}">Login with Google</a>
        {% endif %}
      </p>
      <form class="search" action="{{ url_for('index') }}" method="get">
        <input type="text" name="q" value="{{ query or '' }}" placeholder="Search shots...">
      </form>
    </header>
    {% if current_user.is_authenticated %}
    <p><a href="{{ url_for('upload') }}">Upload a new shot</a></p>
    {% endif %}
    <ul class="gallery">
    {% for entry in entries %}
      <li>
        {% if entry.title %}<h3>{{ entry.title }}</h3>{% endif %}
        <a href="{{ url_for('uploaded_file', filename=entry.filename) }}">
          <img src="{{ url_for('thumbnail', filename=entry.filename) }}" alt="{{ entry.title }}" />
        </a>
        <p>
          {% if entry.movie %}<strong>Movie:</strong> {{ entry.movie }}<br>{% endif %}
          {% if entry.director %}<strong>Director:</strong> {{ entry.director }}<br>{% endif %}
          {% if entry.dop %}<strong>DOP:</strong> {{ entry.dop }}<br>{% endif %}
          {% if entry.year %}<strong>Year:</strong> {{ entry.year }}{% endif %}
        </p>
      </li>
    {% else %}
      <li>No shots yet.</li>
    {% endfor %}
    </ul>
  </body>
</html>
